From: Paride Legovini <pl@ninthfloor.org>
Date: Tue, 27 Mar 2018 14:08:33 +0200
Subject: Patch Makefile to honor the Debian compile options

Cherry-pick from upstream with manual tweaking.
---
 src/Makefile | 69 ++++++++++++++++++++++++++++++++++++++++++------------------
 1 file changed, 48 insertions(+), 21 deletions(-)

--- a/src/Makefile
+++ b/src/Makefile
@@ -1,4 +1,4 @@
-PREFIX := $(DESTDIR)/usr/local
+PREFIX := $(DESTDIR)/usr
 CXXFLAGS := $(CXXFLAGS) $(shell pkg-config --cflags zlib libpng) -DLODEPNG_NO_COMPILE_PNG -DLODEPNG_NO_COMPILE_DISK
 CFLAGS := $(CFLAGS) $(shell pkg-config --cflags zlib libpng) -DLODEPNG_NO_COMPILE_PNG -DLODEPNG_NO_COMPILE_DISK
 LDFLAGS := $(LDFLAGS) $(shell pkg-config --libs libpng)
@@ -78,20 +78,20 @@
 install: flif libflif$(LIBEXT) install-libflif$(LIBEXT)
 	install -d $(PREFIX)/bin $(PREFIX)/share/man/man1
 	install -m 755 flif $(PREFIX)/bin
-	strip -x $(PREFIX)/bin/flif
+#	strip -x $(PREFIX)/bin/flif
 	install -m 644 ../doc/flif.1 $(PREFIX)/share/man/man1
 	install -m 755 ../tools/gif2flif $(PREFIX)/bin
 	install -m 755 ../tools/apng2flif $(PREFIX)/bin
 
 install-viewflif:
 	install -m 755 viewflif $(PREFIX)/bin
-	strip -x $(PREFIX)/bin/viewflif
+#	strip -x $(PREFIX)/bin/viewflif
 
 install-libflif$(LIBEXT): libflif$(LIBEXT)
 	install -d $(PREFIX)/lib
 	install -m 755 libflif$(LIBEXT) libflif$(LIBEXTV) $(PREFIX)/lib
-	strip -x $(PREFIX)/lib/libflif$(LIBEXT) \
-	  $(PREFIX)/lib/libflif$(LIBEXTV)
+#	strip -x $(PREFIX)/lib/libflif$(LIBEXT) \
+#	  $(PREFIX)/lib/libflif$(LIBEXTV)
 
 # There is no prefix here because gdk-pixbuf will not search /usr/local for loadrs
 # while it sucks, it's the truth
@@ -109,9 +109,9 @@
 
 install-decoder: decoder
 	install -m 755 dflif $(PREFIX)/bin
-	strip -x $(PREFIX)/bin/dflif
+#	strip -x $(PREFIX)/bin/dflif
 	install -m 755 libflif_dec$(LIBEXT) libflif_dec$(LIBEXTV) $(PREFIX)/lib
-	strip -x $(PREFIX)/lib/libflif_dec$(LIBEXT) \
+#	strip -x $(PREFIX)/lib/libflif_dec$(LIBEXT) \
 	  $(PREFIX)/lib/libflif_dec$(LIBEXTV)
 
 magic:
