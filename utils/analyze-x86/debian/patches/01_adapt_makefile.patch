Description: updating makefile
 updated makefile to make it more compatible with packaging
Author: Nicolas HOUDELOT <nicolas@demosdebs.org>
Last-Update: 2020-04-18
---
This patch header follows DEP-3: http://dep.debian.net/deps/dep3/
--- a/Makefile
+++ b/Makefile
@@ -1,8 +1,28 @@
-CC=gcc-5
-CFLAGS=-O2 -march=native -mtune=native
+#variables de compilation
+SHELL := /bin/sh
+CC    := gcc
+CFLAGS +=-O3 -flto -Wall -ffast-math -std=gnu90
+TARGET   := analyze-x86
+#variable de nettoyage
+RM_F := rm -f
+#variables dâ€™installation
+INSTALL := install
+INSTALL_DIR     := $(INSTALL) -p -d -o root -g root  -m  755
+INSTALL_PROGRAM := $(INSTALL) -p    -o root -g root  -m  755
+
+prefix          := /usr
+exec_prefix     := $(prefix)
+bindir          := $(prefix)/bin
+
+export
 
 all:
-	$(CC) $(CFLAGS) -Iinclude -o analyze-x86 analyze-x86.c
+	$(CC) $(CFLAGS) -Iinclude -o $(TARGET) analyze-x86.c
 
 clean:
-	rm analyze-x86
+	-@$(RM_F) $(TARGET)
+
+install: $(TARGET)
+	$(INSTALL_DIR) $(DESTDIR)$(bindir)
+	-@$(RM_F) $(DESTDIR)$(bindir)/$(TARGET)
+	$(INSTALL_PROGRAM) $(TARGET) $(DESTDIR)$(bindir)
