.\" Automatically generated by Pandoc 1.19.2.4
.\"
.TH "deark" "1" "2019\-10\-05" "deark User Manuals" ""
.hy
.SH NAME
.PP
deark \- convert and decode old filetypes
.SH SYNOPSIS
.TP
.B Usage:
deark [options] [\-file] options (#options)
.RS
.RE
deark <\-h|\-version|\-modules>
.RS
.RE
.SH DESCRIPTION
.TP
.B Deark is a command\-line utility that can decode certain types of files, and either:
convert them to a more\-modern or more\-readable format; or extract
embedded files from them The files it writes are usually named
"output.*".
.RS
.RE
.PP
This program is still being developed, and its features are subject to
change without notice.
.SH OPTIONS
.TP
.B \-m 
The "module" to use to process the input file.
The default is to autodetect.
.RS
.RE
A module may represent one file format, or a group of related formats,
or may have some special purpose.
See formats.txt for a list of modules.
You usually don\[aq]t need to use \-m, unless the format can\[aq]t be
detected, or you want to use a special\-purpose module such as "copy".
See also the \-onlydetect option.
.RS
.RE
.TP
.B \-l
Don\[aq]t extract, but list the files that would be extracted.
.RS
.RE
This option is not necessarily very efficient.
Deark will still go through all the motions of extracting the files, but
will not actually write them.
.RS
.RE
.TP
.B \-main
Extract only "primary" files (e.g.
not thumbnail images).
.RS
.RE
.TP
.B \-aux
Extract only "auxiliary" files, such as thumbnail images.
.RS
.RE
.TP
.B \-a, \-extractall
Extract more data than usual, including things that are rarely of
interest, such as comments.
See also the "\-opt extract..." options.
.RS
.RE
Note that, as a general rule, Deark doesn\[aq]t extract the same data
twice.
.RS
.RE
In rare cases, the \-a option can actually \f[I]prevent\f[] it from
extracting certain data, because it may now, for example, extract a
block of Exif data, instead of drilling down and extracting the
thumbnail image within it.
.RS
.RE
.TP
.B \-o 
Output filenames begin with this string.
This can include a directory path.
Default is "output", except in some cases when using \-zip/\-tar.
.RS
.RE
.TP
.B \-k, \-k2, \-k3
"Keep" the input filename, and use it as the initial part of the output
filename(s).
\-k: Use only the base filename.
\-k2: Use the full path, but not as an actual path.
\-k3: Use the full path, as\-is.
\-n
.RS
.RE
Do not overwrite existing output files.
.RS
.RE
.TP
.B \-file 
This is an alternate syntax for specifying the primary input file.
It works even if the filename begins with "\-".
.RS
.RE
.TP
.B \-file2 
Some formats are composed of more than one file.
In some cases, you can use the \-file2 option to specify the secondary
file.
Refer to the formats.txt file for details.
.RS
.RE
.TP
.B \-zip
Write output files to a .zip file, instead of to individual files.
If the input format is an "archive" format (e.g.
"ar" or "graspgl"), then by default, the filenames in the ZIP archive
might not include the usual "output.NNN" prefix.
.RS
.RE
.PP
\-tar Write output files to a .tar file, instead of to individual files.
Similar to \-zip, but may work better with large files.
The \-tostdout option is not currently supported when using \-tar.
.PP
\-arcfn When using \-zip/\-tar, use this name for the output file.
Default is "output.zip" or "output.tar".
.PP
\-extrlist Also create a text file containing a list of the names of the
extracted files.
Format is UTF\-8, no BOM, LF terminators.
To append to the file instead of overwriting, use with "\-opt
extrlist:append".
.PP
\-tostdout Write the output file(s) to the standard output stream
(stdout).
It is recommended to put \-tostdout early on the command line.
The \-msgstostderr option is enabled automatically.
If used with \-zip: Write the ZIP file to standard output.
c Otherwise: The "\-maxfiles 1" option is enabled automatically.
Including the \-main option is recommended.
\-fromstdin Read the input file from the standard input stream (stdin).
If you use \-fromstdin, supplying an input filename is optional.
If it is supplied, the file will not be read (and need not exist), but
the name might be used to help guess the file format.
This option might not be very efficient, and might not work with
extremely large files.
.PP
\-start Pretend that the input file starts at byte offset .
.PP
\-size Pretend that the input file contains only (up to) bytes.
.PP
\-firstfile Don\[aq]t extract the first files found.
.PP
\-maxfiles Extract at most files.
.PP
\-get Extract only the file identifed by .
The first file is 0.
Equivalent to "\-firstfile \-maxfiles 1".
To unconditionally show the file identifiers, use "\-l \-opt
list:fileid".
.PP
\-maxfilesize Do not write a file larger than bytes.
The default is 10 GiB.
This is an "emergency brake".
If the limit is exceeded, Deark will stop all processing.
This setting is for physical output files, so if you use \-zip/\-tar, it
applies to the ZIP/tar file, not to the individual member files.
This option implicitly increases the \-maxtotalsize setting to be at
least .
.TP
.B \-maxtotalsize 
Do not write files totaling more than about bytes.
The default is 15 GiB.
Currently, this feature is not implemented very precisely.
The limit is only checked when an output file is completed.
.RS
.RE
.TP
.B \-maxdim 
Allow image dimensions up to pixels.
By default, Deark refuses to generate images with a dimension larger
than 10000 pixels.
You can use \-maxdim to decrease or increase the limit.
.RS
.RE
Increase the limit at your own risk.
Deark does not generate large images efficiently.
In practice, a large dimension will only work if the other dimension is
very small.
.RS
.RE
.TP
.B \-nobom
Do not add a BOM to UTF\-8 output files generated or converted by Deark.
Note that if a BOM already exists in the source data, it will not
necessarily be removed.
.RS
.RE
.TP
.B \-nodens
Do not try to record the original aspect ratio and pixel density in
output image files.
.RS
.RE
.TP
.B \-asciihtml
When generating an HTML document, use ASCII encoding instead of UTF\-8.
This does not change how a browser will render the file; it just makes
it larger and very slightly more portable.
.RS
.RE
.TP
.B \-nonames
Make Deark less likely to try to improve output filenames by using names
from the contents of the input file.
The output filenames will be more predictable, but less informative.
.RS
.RE
.TP
.B \-nomodtime
In some cases, mainly when reading archive formats, a last\-modified
timestamp contained in an input file will be used to set the timestamp
of an output file written directly to your computer (or with
\-zip/\-tar, of a member file inside that file).
Use \-nomodtime to disable this.
.RS
.RE
This does not affect internal timestamps that may be maintained when
Deark converts an item to some other format (such as PNG or HTML).
.RS
.RE
.PP
\-opt = Module\-specific and feature\-specific options.
See formats.txt.
Caution: Unrecognized or misspelled options will be silently ignored.
Options not specific to one format: \-opt font:charsperrow= The number
of characters per row, when rendering a font to a bitmap \-opt
font:tounicode=<0|1> [Don\[aq]t] Try to translate a font\[aq]s
codepoints to Unicode codepoints.
\-opt char:output= The output format for character graphics (such as
ANSI Art).
\-opt char:charwidth=<8|9> The VGA character cell width for character
graphics, when the output format is "image".
\-opt archive:subdirs=0 When using \-zip/\-tar, disallow subdirectories
(the "/" character) in member filenames.
\-opt archive:zipcmprlevel= When using \-zip, the compression level to
use, from 0 (none) to 9 (max).
\-opt pngcmprlevel= When generating a PNG file, the compression level to
use, from 0 (low) to 10 (max).
\-opt archive:timestamp= \-opt archive:repro Make the \-zip/\-tar output
reproducible, by not including modification times that are not contained
in the source file.
(That is, don\[aq]t use the current time, or the source file\[aq]s
timestamp.) If you use "repro", the times will be set to some arbitrary
value.
If you use "timestamp", the times will be set to the value you supply,
in Unix time format (the number of seconds since the beginning of 1970).
\-opt keepdirentries=<0|1> Select whether an archive file\[aq]s
directory entries are ignored (0), or "extracted" (1).
For details, see the technical.md file.
\-opt list:fileid=<0|1> Select whether the \-l (list) option also prints
the numeric file identifiers.
\-opt extrlist:append Affects the \-extrlist option.
\-opt extractexif[=0] \-opt extract8bim \-opt extractiptc[=0] \-opt
extractplist Extract the specified type of data to a file, instead of
decoding it.
For more about the ".8bimtiff" and ".iptctiff" formats, see the
technical.md file.
\-opt atari:palbits=<9|12|15> For some Atari image formats, the number
of significant bits per palette color.
The default is to autodetect.
\-opt macrsrc= The preferred way to extract Macintosh resource forks,
and data files associated with a non\-empty resource fork.
raw = Write the raw resource fork to a separate .rsrc file.
ad = Put the resource fork in an AppleDouble container (default).
as = Put both forks in an AppleSingle container.
For input files already in AppleDouble or AppleSingle format, see the
formats.txt file for more information.
.TP
.B \-h, \-?, \-help:
Print the help message.
.RS
.RE
Use with \-m to get help for a specific module.
Use with a filename to get help for the detected format of that file.
Note that most modules have no module\-specific help to speak of.
.RS
.RE
.TP
.B \-version
Print the version number, and other version information.
.RS
.RE
.TP
.B \-modules
Print the names of the available modules.
.RS
.RE
With \-a, list all modules, including internal modules, and modules that
don\[aq]t work.
.RS
.RE
.TP
.B \-noinfo
Suppress informational messages.
.RS
.RE
.TP
.B \-nowarn
Suppress warning messages.
.RS
.RE
.TP
.B \-q
Suppress informational and warning messages.
.RS
.RE
.TP
.B \-d, \-d2, \-d3
Print technical and debugging information.
\-d2 and \-d3 are more verbose.
.RS
.RE
.TP
.B \-dprefix 
Start each line printed by \-d with this prefix.
Default is "DEBUG: ".
.RS
.RE
.TP
.B \-colormode 
Control whether Deark uses color and similar features in its debug
output.
.RS
.RE
Currently, this is mainly used to highlight unprintable characters, and
preview color palettes (usually requires \-d2).
none: No color (default).
ansi: Use ANSI codes, but not the less\-standard ones for 24\-bit color.
ansi24: Use ANSI codes, including codes for 24\-bit color.
Works on most Linux terminals, and on sufficiently new versions of
Windows 10.
winconsole: Use Windows console commands.
Works on all versions of Windows, but does not support 24\-bit color.
auto: Request color.
Let Deark decide how to do it.
.RS
.RE
.TP
.B \-color
Same as "\-colormode auto".
.RS
.RE
.PP
\-enc Set the encoding of the messages that are printed to the console.
This does not affect the extracted data files.
The default is to use Unicode (UTF\-8, when the encoding is relevant).
ascii: Use ASCII characters only.
oem: [Windows only; has no effect on other platforms] Use the "OEM"
character set.
This may be useful when paging the output with "|more".
.TP
.B \-inenc 
Supply a hint as to the encoding of the text contained in the input
file.
.RS
.RE
This option is incompletely implemented, and will be ignored if the
encoding can be reliably determined by other means.
Admittedly, Deark does not yet know enough encodings for this option to
be really useful.
.RS
.RE
.TP
.B \-intz 
Supply a hint as to the time zone used by timestamps contained in the
input file.
.RS
.RE
Many file formats unfortunately contain timestamps in "local time", with
no information about their time zone.
In such cases, the supplied \-intz offset will be used to convert the
timestamp to UTC.
The "offset" parameter is in hours east of UTC.
For example, New York City is \-5.0, or \-4.0 when Daylight Saving Time
is in effect.
This option does not respect Daylight Saving Time.
It cannot deal with the case where some of the timestamps in a file are
in DST, and others are not.
.RS
.RE
.TP
.B \-msgstostderr
Print all messages to stderr, instead of stdout.
This option should be placed early on the command line, as it might not
affect messages related to options that appear before it.
.RS
.RE
.PP
\-nodetect <module1,module2,...>
.TP
.B \-onlydetect <module1,module2,...>
Disable autodetection of the formats in the list (or for \-onlydetect,
the formats \f[I]not\f[] in the list).
.RS
.RE
.PP
\-disablemods <module1,module2,...>
.TP
.B \-onlymods <module1,module2,...>
Completely disable the main functionality, and the autodetection
functionality, of the modules in the list (or for \-onlymods, the
modules \f[I]not\f[] in the list).
This can have unexpected side effects, because modules often use other
modules internally.
These options exist mainly to help address potential security\-related
concerns in some workflows.
.RS
.RE
.TP
.B \-modcodes 
Run the module in a non\-default "mode".
.RS
.RE
The existence of this option (though not its details) is documented in
the interest of transparency, but it is mainly for developers, and to
make it possible to do things whose usefulness was not anticipated.
.RS
.RE
.SH Terms of use
.PP
Starting with version 1.4.x, Deark is distributed under an MIT\-style
license.
See the COPYING file for the license text.
.PP
The main Deark license does not necessarily apply to the code in the
"foreign" subdirectory.
Each file there may have its own licensing terms.
In particular:
.PP
uncompface.h: Copyright (c) James Ashton \- Sydney University \- June
1990 (See the file foreign/readme\-compface.txt for details.)
.PP
By necessity, Deark contains knowledge about how to decode various
third\-party file formats.
This knowledge includes data structures, algorithms, tables, color
palettes, etc.
The author(s) of Deark make no intellectual property claims to this
essential knowledge, but they cannot guarantee that no one else will
attempt to do so.
.PP
Deark contains VGA and CGA bitmapped fonts, which have no known
copyright claims.
.PP
Be particularly wary of relying on Deark to decode archive and
compression formats (tar, ar, gzip, cpio, ...).
For example, to decode tar format, you really should use a
battle\-hardened application like GNU Tar, not Deark.
Deark\[aq]s support for such formats is often incomplete, and it does
not always do integrity checking.
.SH Acknowledgements
.PP
Thanks to Rich Geldreich for the miniz library.
.PP
Thanks to Mike Frysinger, and the authors of compress/ncompress, for
liblzw.
.PP
Thanks to Rahul Dhesi and Martin Schoenert for much of the code used by
the ZOO format decoder.
.PP
Thanks to James Ashton for much of the code used by the X\-Face format
decoder.
.PP
Thanks to Allan G.
Weber for the Huffman decompression code used by the StuffIt format
decoder.
.PP
Thanks to Mark Adler for the ZIP "implode" decompression code.
.PP
Thanks to countless others who have documented the supported file
formats.
.SH Authors
.PP
Written by Jason Summers, 2014\-2019.
Copyright Â© 2016\-2019 Jason Summers https://entropymine.com/deark/
https://github.com/jsummers/deark
.SH SEE ALSO
.PP
\f[C]deark\f[](1)
.SH BUGS
.PP
No known bugs.
.SH AUTHORS
Jason Summers.
